{*** 상품리스트 | goods/goods_main.php ***}
{#header}
<!--{ ? mainData.displayFl == 'y'}-->
<div class="goods_main js_main_wrap_{mainData.sno}_{mainData.groupSno}">
	<div class="goods_list_content">
		<div class="goods_top_box">
			<div class="goods_arr_box">
				<div class="goods_sort">
					<div class="inp_sel">
						<select name="goods_sort" onchange="gd_get_list{mainData.sno}g{mainData.groupSno}(1);">
							<option value="">{=__('상품정렬')}</option>
							<option value="date">{=__('등록순')}</option>
							<option value="price_asc">{=__('낮은가격순')}</option>
							<option value="price_dsc">{=__('높은가격순')}</option>
						</select>
					</div>
				</div>
				<div class="goods_view_type" style="display: none;">
					<input type="hidden" name="displayType" value="{mainData.displayType}" />
					<ul>
						<li><button class="" data-key="02" >list</button></li>
						<li><button class="" data-key="09">gallery_type1</button></li>
						<li><button class="" data-key="01">gallery_type2</button></li>
					</ul>
				</div>
			</div>
		</div>
		<div class="goods_list_box">
			<!--{ ? mainData.sno == '296' }-->
			<div class="tab_btn">
				<a class="on"><span>1만원~3만원</span></a>
				<a href="https://m.dhuman.co.kr/goods/goods_main.php?sno=297"><span>3만원~5만원</span></a>
				<a href="https://m.dhuman.co.kr/goods/goods_main.php?sno=298"><span>5만원~7만원</span></a>
				<a href="https://m.dhuman.co.kr/goods/goods_main.php?sno=299"><span>7만원~10만원</span></a>
			</div>
			<!--{/}-->
			<!--{ ? mainData.sno == '297' }-->
			<div class="tab_btn">
				<a href="https://m.dhuman.co.kr/goods/goods_main.php?sno=296"><span>1만원~3만원</span></a>
				<a class="on"><span>3만원~5만원</span></a>
				<a href="https://m.dhuman.co.kr/goods/goods_main.php?sno=298"><span>5만원~7만원</span></a>
				<a href="https://m.dhuman.co.kr/goods/goods_main.php?sno=299"><span>7만원~10만원</span></a>
			</div>
			<!--{/}-->
			<!--{ ? mainData.sno == '298' }-->
			<div class="tab_btn">
				<a href="https://m.dhuman.co.kr/goods/goods_main.php?sno=296"><span>1만원~3만원</span></a>
				<a href="https://m.dhuman.co.kr/goods/goods_main.php?sno=297"><span>3만원~5만원</span></a>
				<a class="on"><span>5만원~7만원</span></a>
				<a href="https://m.dhuman.co.kr/goods/goods_main.php?sno=299"><span>7만원~10만원</span></a>
			</div>
			<!--{/}-->
			<!--{ ? mainData.sno == '299' }-->
			<div class="tab_btn">
				<a href="https://m.dhuman.co.kr/goods/goods_main.php?sno=296"><span>1만원~3만원</span></a>
				<a href="https://m.dhuman.co.kr/goods/goods_main.php?sno=297"><span>3만원~5만원</span></a>
				<a href="https://m.dhuman.co.kr/goods/goods_main.php?sno=298"><span>5만원~7만원</span></a>
				<a class="on"><span>7만원~10만원</span></a>
			</div>
			<!--{/}-->
			<ul class="goods_product_list goods_main{mainData.sno}g{mainData.groupSno}"></ul>
			<div class="btn_box">
				<button type="button" class="goods_main_more_btn btn_main_bottom_more" data-page="2" >{=__('더보기')}</button>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
	<!--
	var keyValue{mainData.sno}g{mainData.groupSno} = '{gGlobal.locale + mainData.sno}' + 'G{mainData.groupSno}';
	var key{mainData.sno}g{mainData.groupSno} = {
		html: 'html' + keyValue{mainData.sno}g{mainData.groupSno},
		page: 'page' + keyValue{mainData.sno}g{mainData.groupSno},
		displayType: 'displayType' + keyValue{mainData.sno}g{mainData.groupSno}
	};
	var gdStorage{mainData.sno}g{mainData.groupSno} = gd_load_session(key{mainData.sno}g{mainData.groupSno}.html);
	var page{mainData.sno}g{mainData.groupSno} = gd_load_session(key{mainData.sno}g{mainData.groupSno}.page);
	var displayType{mainData.sno}g{mainData.groupSno} = gd_load_session(key{mainData.sno}g{mainData.groupSno}.displayType);

	$(document).ready(function(){
		_initDisplayType();            
		if (displayType{mainData.sno}g{mainData.groupSno}) {            
			// storage 저장된 진열 타입이 있는 경우            
			_setDisplayType(displayType{mainData.sno}g{mainData.groupSno});            
		} else {            
			// 저장된 값 없으면 default            
			_setDisplayType("{mainData.displayType}");            
		}
		if (gdStorage{mainData.sno}g{mainData.groupSno}) {
			$('.goods_main{mainData.sno}g{mainData.groupSno}').html(gdStorage{mainData.sno}g{mainData.groupSno});
			if (page{mainData.sno}g{mainData.groupSno}) {
				$('.js_main_wrap_{mainData.sno}_{mainData.groupSno} .btn_main_bottom_more').attr('data-page',page{mainData.sno}g{mainData.groupSno});
				if($('input[name="totalPage"]').val() < parseInt(page{mainData.sno}g{mainData.groupSno})) {
					$('.js_main_wrap_{mainData.sno}_{mainData.groupSno} .btn_main_bottom_more').hide();
				}
			}
		} else {
			gd_get_list{mainData.sno}g{mainData.groupSno}('1');
		}

		$('.js_main_wrap_{mainData.sno}_{mainData.groupSno} .btn_main_bottom_more').on('click', function(e){
			gd_get_list{mainData.sno}g{mainData.groupSno}($(this).data('page'));
		});

		$('.goods_view_type ul li').on('click', function(e){
			_initDisplayType();            
			_setDisplayType($(this).find('button').data('key'));            
			gd_save_session(key{mainData.sno}g{mainData.groupSno}.displayType, $(this).find('button').data('key'));            
			gd_get_list{mainData.sno}g{mainData.groupSno}('1');
		});

	});

	function gd_get_list{mainData.sno}g{mainData.groupSno}(page){

		var sort =  $('select[name="goods_sort"]').val();
		var displayType = $('input[name="displayType"]').val();

		$.post('../goods/goods_ps.php', {'mode' : 'get_main', 'more' : page, 'mainSno' : '{mainData.sno}', 'sort' : sort, 'displayType' :displayType, 'groupSno' : '{mainData.groupSno}'}, function (data) {

			$(".goods_main{mainData.sno}g{mainData.groupSno}").html(data);
			gd_save_session(key{mainData.sno}g{mainData.groupSno}.html, data);

			if($(data).filter("input[name='totalPage']").val() > 1) {
				$('.js_main_wrap_{mainData.sno}_{mainData.groupSno} .btn_main_bottom_more').data('page',parseInt(page)+1);
				gd_save_session(key{mainData.sno}g{mainData.groupSno}.page, parseInt(page)+1);
			} else {
				$('.js_main_wrap_{mainData.sno}_{mainData.groupSno} .btn_main_bottom_more').hide();
				gd_save_session(key{mainData.sno}g{mainData.groupSno}.page, parseInt(page));
			}
		});
	}
	// Initialize goods list display type            
	function _initDisplayType () {            
		$(".goods_view_type ul li button").removeClass('on');            
	}            
	function _setDisplayType (displayType) {            
		$('input[name="displayType"]').val(displayType);            
		$(".goods_view_type ul li button[data-key=" + displayType + "]").addClass('on');            
	}            

	//-->
</script>
<!--{ / }-->

{#footer}
